{% extends 'ihrepo/base.html' %}
<!-- loads images -->
{% load static %}

{% block content %}
    <div class="row justify-content-center">
        <div class="row-md-4">
            <div class="">
                <a href="{% url 'home' %}" class="my-3 btn btn-dark btn-sm">Go Back</a>
            </div>
            <div style="height: 90vh">
                <!--<img class="img-fluid text-center" style="max-width: 100%; max-height: 100%" src="{{ book.image.url }}" alt="">-->
                <h5 class="text-muted">Name: {{ video.video_name }}</h5>
                <small>Path: {{ video.video_path }}</small><br>
                <form action="{% url 'video-detail' video.id %}" method="get">
                    <select name="languageid" id="language-selector">
                        {% for subtitle in video.subtitles_set.all %}
                            <option value="{{ subtitle.languageid }}">{{ subtitle.languageid }}</option>
                        {% endfor %}
                    </select>
                    <!--<a href="{% url 'play-video' video.id 'en' %}" class="btn btn-success btn-sm">Play Video</a>-->
                    <a href="#" id="play-video-btn" class="btn btn-success btn-sm">Play Video</a>
                </form>
                <!--<a href="{% url 'play-video' video.id 'en' %}" class="btn btn-success btn-sm">Play Video</a>-->
                <a href="{% url 'edit-video' video.id %}" class="btn btn-success btn-sm">Edit Video</a>
                <a href="{% url 'delete-video' video.id %}" class="btn btn-danger btn-sm">Delete Video</a>
            </div>
        </div>
    </div>
{% endblock %}
<script>
    // get the language selector and play video button
    const languageSelector = document.getElementById('language-selector');
    const playVideoBtn = document.getElementById('play-video-btn');
    
    // add a click event listener to the play video button
    playVideoBtn.addEventListener('click', () => {
        // get the selected language from the dropdown
        const languageId = languageSelector.value;
        
        // construct the url for the selected language and redirect to it
        const url = "{% url 'play-video' video.id '' %}".replace('', languageId);
        window.location.href = url;
    });
</script>